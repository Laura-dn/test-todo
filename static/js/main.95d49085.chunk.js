(this.webpackJsonp2do=this.webpackJsonp2do||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(20)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),c=a.n(i),s=a(5),l=a(1),o=a(2),u=a(4),m=a(3);a(13);var d=function(e){var t=e.id,a=e.task,n=e.isDone,i=e.isImportant,c=e.onClickElement,s="list-group-item d-flex align-items-center justify-content-between",l=r.a.createElement("i",{className:"fa fa-star","aria-hidden":"true"});return s+=n?" done":"",s+=i?" important":"",r.a.createElement("li",{className:s,role:"button"},r.a.createElement("span",{className:"container text-left",onClick:function(){return c("DONE",t)}},i?l:"","\xa0",a),r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return c("IMPORTANT",t)}},r.a.createElement("i",{className:"fas fa-hand-point-up"})),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(){return c("DEL",t)}},r.a.createElement("i",{className:"fas fa-trash-alt"}))))};a(14);var f=function(e){var t=e.data,a=e.onClickElement;return r.a.createElement("ul",{className:"list-group"},t.map((function(e){return r.a.createElement(d,Object.assign({key:e.id},e,{onClickElement:a}))})))};a(15);var p=function(e){var t=e.all,a=e.done,n=e.imp,i=e.filter,c=e.onClickElement,s={width:""},l="progress-bar progress-bar-striped progress-bar-animated";return"ONLYIMPORTANT"===i?(l+=l+" bg-primery",s.width=Math.floor(100*Number(n)/Number(t))+"%"):(l+=l+" bg-success",s.width=Math.floor(100*Number(a)/Number(t))+"%"),"NaN%"===s.width&&(s.width=""),r.a.createElement("section",null,r.a.createElement("p",{className:"text-right"},r.a.createElement("span",{className:"badge badge-success ".concat("ONLYDONE"===i?"btnOn":""),onClick:function(){return c("FILTER",null,"ONLYDONE")},role:"button"},"DONE: ",a),r.a.createElement("span",{className:"badge badge-primary ml-1 ".concat("ONLYIMPORTANT"===i?"btnOn":""),onClick:function(){return c("FILTER",null,"ONLYIMPORTANT")},role:"button"},"IMP: ",n),r.a.createElement("span",{className:"badge badge-dark ml-1 ".concat("ALLTASKS"===i?"btnOn":""),onClick:function(){return c("FILTER",null,"ALLTASKS")},role:"button"},"ALL: ",t)),r.a.createElement("div",{className:"progress mb-3"},r.a.createElement("div",{className:l,role:"progressbar","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":t,style:s},s.width)))},b=(a(16),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={input:""},e.onClickElement=function(){e.props.onClickElement("ADD",null,e.state.input),e.setState({input:""})},e.inputChange=function(t){e.setState({input:t.target.value})},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u0417\u0430\u0434\u0430\u0447\u0430",onChange:this.inputChange,value:this.state.input}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary bg-info text-white",type:"button",onClick:this.onClickElement},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))}}]),a}(n.Component));a(17);var E=function(e){var t=e.onClickElement;return r.a.createElement("button",{type:"button",className:"btn btn-danger mt-3",onClick:function(){return t("DELALL")}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0421\u043f\u0438\u0441\u043e\u043a")};a(18);var h=function(e){return r.a.createElement("input",{className:"form-control form-control-sm mb-3",type:"search",placeholder:"\ud83d\udd0d",onChange:function(t){return e.onClickElement("SEARCH",null,t)}})},k=(a(19),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={maxId:0,listData:[],filter:"ALLTASKS",search:""},n.onClickElement=function(e,t,a){var r=Object(s.a)(n.state.listData);switch(e){case"DONE":r.forEach((function(e){e.id===t&&(e.isDone=!e.isDone,n.crud("update",e))}));break;case"IMPORTANT":r.forEach((function(e){e.id===t&&(e.isImportant=!e.isImportant,n.crud("update",e))}));break;case"ADD":var i=n.generateItem(a);r.push(i),n.crud("create",i);break;case"DEL":r=r.filter((function(e){return e.id!==t})),n.crud("delete",t);break;case"FILTER":n.setState({filter:a});break;case"DELALL":n.crud(e),r=[];break;case"SEARCH":n.setState({search:a.target.value});break;default:console.log("ERROR")}n.setState({listData:r})},n.dbFirstInit(),n.crud("read"),n}return Object(o.a)(a,[{key:"dbFirstInit",value:function(){window.indexedDB.open("listBank",1).onupgradeneeded=function(e){e.target.result.createObjectStore("tasks",{keyPath:"id"})}}},{key:"stateInit",value:function(e,t){var a=this;e.onsuccess=function(e){var t=e.target.result,n=t.reduce((function(e,t){var a=t.id;return e>a?e:a}),0);a.setState({listData:t,maxId:n})}}},{key:"crud",value:function(e,t){var a=this,n=window.indexedDB.open("listBank",1),r="read"===e?"readonly":"readwrite";n.onsuccess=function(){var i=n.result.transaction("tasks",r).objectStore("tasks");switch(e){case"create":i.add(t);break;case"read":a.stateInit(i.getAll());break;case"update":i.put(t);break;case"delete":i.delete(t);break;case"DELALL":i.clear();break;default:console.log("ERROR")}}}},{key:"generateItem",value:function(e){0===e.length&&(e="New task");var t=this.state.maxId+1;return this.setState({maxId:t}),{id:t,task:e,isDone:!1,isImportant:!1}}},{key:"filter",value:function(){var e=Object(s.a)(this.state.listData);switch(this.state.filter){case"ONLYDONE":return e.filter((function(e){return!0===e.isDone}));case"ONLYIMPORTANT":return e.filter((function(e){return!0===e.isImportant}));case"ALLTASKS":return e;default:console.log("ERROR")}}},{key:"getStatistics",value:function(){return{all:this.state.listData.length,done:this.state.listData.reduce((function(e,t){return e+(t.isDone?1:0)}),0),imp:this.state.listData.reduce((function(e,t){return e+(t.isImportant?1:0)}),0),filter:this.state.filter,onClickElement:this.onClickElement}}},{key:"search",value:function(e){if(""===this.state.search)return e;var t=new RegExp(this.state.search,"i");return e.filter((function(e){var a=e.task;return t.test(a)}))}},{key:"render",value:function(){var e=this.getStatistics(),t=this.search(this.filter());return r.a.createElement("section",{className:"app text-center p-3"},r.a.createElement(h,{onClickElement:this.onClickElement}),r.a.createElement(p,e),r.a.createElement(b,{onClickElement:this.onClickElement}),r.a.createElement(f,{data:t,onClickElement:this.onClickElement}),r.a.createElement(E,{onClickElement:this.onClickElement}))}}]),a}(n.Component));c.a.render(r.a.createElement(k,null),document.querySelector("#root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.95d49085.chunk.js.map